@{
    ViewData["Title"] = "Gestor de inventario";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}
@model Gestor_Digital_ASADA_CL.Models.ProductViewModel

<h2 class="mt-2">Inventario de productos ASADA</h2>
<hr />

<div class="row">
    <div class="col col-md-3">
        <div class="input-group mt-3 p-3">
            <form method="POST">
                <input id="busqueda" name="busqueda" type="search" class="form-control rounded" placeholder="Nombre" aria-label="Search" aria-describedby="search-addon" />
                <button type="submit" class="btn-search mt-3 btn btn-outline-primary mt-">buscar</button>
                <a style="background-color: #6DC7F6;" class="mt-3 btn btn-success"> <i style="background-color: #6DC7F6;" class="fas fa-sync"></i> </a>
                <button type="button" data-bs-toggle="modal" data-bs-target="#modalRegistrar" class="mt-3 btn btn-primary">Agregar nuevo</button>
            </form>
        </div>
    </div>
</div>

<table id="table" class="table p-3 table-responsive">
    <thead>
        <tr>
            <th>Código</th>
            <th> Nombre</th>
            <th>Valor unitario</th>
            <th>Cantidad</th>
            <th>Fecha de ingreso</th>
            <th>Descripción</th>
            <th>Solic. herramienta</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>123</td>
            <td>Herramenta COTTER</td>
            <td>13 000</td>
            <td>4</td>
            <td> 06/04/2021 8:32</td>
            <td>Relleno relleno relleno</td>
            <td>
                <button class="btn btn-primary" onclick=" return false;" data-bs-toggle="modal" data-bs-target="#modalTomar">
                    <i class="fas fa-hand-paper"></i>
                </button>
                <button class="btn btn-info" onclick="putOnModal(this); return false;" data-bs-toggle="modal" data-bs-target="#modalEditar">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-danger" onclick=" return false;" data-bs-toggle="modal" data-bs-target="#deleteModal">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>
        <tr>
            <td>443</td>
            <td>Pala SuperFlex </td>
            <td>18 000</td>
            <td>19</td>
            <td>12/04/2021 10:32</td>
            <td>Relleno relleno relleno</td>
            <td>
                <button class="btn btn-primary" onclick=" return false;" data-bs-toggle="modal" data-bs-target="#modalTomar">
                    <i class="fas fa-hand-paper"></i>
                </button>
                <button class="btn btn-info" onclick="putOnModal(this); return false;" data-bs-toggle="modal" data-bs-target="#modalEditar">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-danger" onclick=" return false;" data-bs-toggle="modal" data-bs-target="#deleteModal">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>
        <tr>
            <td>123RT </td>
            <td> Herramenta Plus-pln </td>
            <td>13 000</td>
            <td>12</td>
            <td>08/07/2021 12:04</td>
            <td>
                Relleno relleno relleno
            </td>
            <td>
                <button class="btn btn-primary" onclick=" return false;" data-bs-toggle="modal" data-bs-target="#modalTomar">
                    <i class="fas fa-hand-paper"></i>
                </button>
                <button class="btn btn-info" onclick="putOnModal(this); return false;" data-bs-toggle="modal" data-bs-target="#modalEditar">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-danger" onclick=" return false;" data-bs-toggle="modal" data-bs-target="#deleteModal">
                    <i class="fas fa-trash"></i>
                </button>
            </td>
        </tr>
    </tbody>
</table>

<div class="modal" id="modalTomar" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div style="background-color: #6DC7F6;" class="modal-header">
                <h5 class="modal-title">Reportar solicitud de: <span>herramienta COTTER</span></h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="POST" asp-controller="Product" asp-action="RealizarReporteAdmin" class="mt-2 ml-2 p-3">
                    <div class="form-group">
                        <label for="taDetalles">Detalles</label>
                        <textarea class="form-control" id="taDetalles" style="resize:none; height:5em; width:20em;"></textarea>
                    </div>
                    <div class="form-group mt-2">
                        <label for="cantidad">Tomaré la cantidad de: </label>
                        <input type="number" min="1" name="cantidad" value="" class="form-control" id="stock" placeholder="productos" required>
                    </div>
                    <button type="submit" data-bs-toggle="modal" data-bs-target="#modalMensaje" style="background-color: #6DC7F6;" class="btn btn-primary mt-2">Reportar</button>
                </form>
            </div>
            <h5 class="modal-data p-2">A nombre de: <span style="color: #6DC7F6;">Juan Carlos Sequeira</span></h5>
            <div style="background-color: #6DC7F6;" class="modal-footer">
                <button type="button" style="background-color: #313436;" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="modalEditar" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div style="background-color: #6DC7F6;" class="modal-header">
                <h5 class="modal-title">Editar producto: <span>123</span></h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="POST" asp-controller="Product" asp-action="EditarProducto" class="mt-2 ml-2 p-3">
                    <div class="form-group">
                        <label for="codigo">Código: </label>
                        <input class="form-control" id="codigo" asp-for="Code">
                        <span class="field-validation-error" asp-validation-for="Code"></span>
                    </div>
                    <div class="form-group">
                        <label class="mt-2" for="nombre">Nombre: </label>
                        <input class="mt-2 form-control" id="nombre" asp-for="Name">
                        <span class="field-validation-error" asp-validation-for="Name"></span>
                    </div>

                    <div class="form-group">
                        <label for="cantidad">cantidad: </label>
                        <input  min="1" class="form-control" id="cantidad" asp-for="Amount">
                        <span class="field-validation-error" asp-validation-for="Amount"></span>
                    </div>

                    <div class="form-group">
                        <label for="valor">valor unitario: </label>
                        <input class="form-control" id="valor" asp-for="UnitValue">
                        <span class="field-validation-error" asp-validation-for="UnitValue"></span>
                    </div>
                    <div class="form-group">
                        <label for="fecha">Fecha de ingreso: </label>
                        <input class="form-control" id="fecha" asp-for="InDate">
                        <span class="field-validation-error" asp-validation-for="InDate"></span>
                    </div>
                    <div class="form-group">
                        <label for="descripcion">Descripción: </label>
                        <textarea style="resize:none;" class="form-control" id="descripcion" asp-for="Description" rows="3"></textarea>
                        <span class="field-validation-error" asp-validation-for="Description"></span>
                    </div>
                    <button type="submit" data-bs-toggle="modal" data-bs-target="#modalMensaje" style="background-color: #6DC7F6;" class="btn btn-primary mt-2">Guardar cambios</button>
                </form>
            </div>
            <div style="background-color: #6DC7F6;" class="modal-footer">
                <button type="button" style="background-color: #313436;" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div style="background-color: #6DC7F6;" class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">¿Está seguro de eliminar este producto?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                El producto será borrado permanentemente del sistema
            </div>
            <div class="modal-footer">
                <form method="POST" asp-controller="Product" asp-action="BorrarProducto">
                    <button type="submit" class="btn btn-primary">Confirmar</button>
                </form>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="modalRegistrar" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div style="background-color: #6DC7F6;" class="modal-header">
                <h5 class="modal-title">Registrar producto</h5>
                <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="POST" asp-controller="Product" asp-action="RegistrarProducto" class="mt-2 ml-2 p-3">
                    <div class="form-group">
                        <label for="codigo">Código: </label>
                        <input class="form-control" id="codigo" asp-for="Code">
                        <span class="field-validation-error" asp-validation-for="Code"></span>
                    </div>
                    <div class="form-group">
                        <label class="mt-2" for="nombre">Nombre: </label>
                        <input class="mt-2 form-control" id="nombre" asp-for="Name">
                        <span class="field-validation-error" asp-validation-for="Name"></span>
                    </div>

                    <div class="form-group">
                        <label for="cantidad">cantidad: </label>
                        <input min="1" class="form-control" id="cantidad" asp-for="Amount">
                        <span class="field-validation-error" asp-validation-for="Amount"></span>
                    </div>

                    <div class="form-group">
                        <label for="valor">valor unitario: </label>
                        <input class="form-control" id="valor" asp-for="UnitValue">
                        <span class="field-validation-error" asp-validation-for="UnitValue"></span>
                    </div>
                    <div class="form-group">
                        <label for="fecha">Fecha de ingreso: </label>
                        <input class="form-control" id="fecha" asp-for="InDate">
                        <span class="field-validation-error" asp-validation-for="InDate"></span>
                    </div>
                    <div class="form-group">
                        <label for="descripcion">Descripción: </label>
                        <textarea style="resize:none;" class="form-control" id="descripcion" asp-for="Description" rows="3"></textarea>
                        <span class="field-validation-error" asp-validation-for="Description"></span>
                    </div>
                    <button type="submit" data-bs-toggle="modal" data-bs-target="#modalMensaje" style="background-color: #6DC7F6;" class="btn btn-primary mt-2">Agregar</button>
                </form>
            </div>
            <div style="background-color: #6DC7F6;" class="modal-footer">
                <button type="button" style="background-color: #313436;" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            </div>
        </div>
    </div>
</div>

<script src="~/js/Product.js" asp-append-version="true"></script>

@section scripts
{
    <partial name="_ValidationScriptsPartial" />
    <script type="text/javascript">
        $(document).ready(function () {
            if ('@ViewBag.ShowModalResponse' === 'True') {
               createModalResponse("@ViewBag.mensaje");
            }
           });
    </script>
}